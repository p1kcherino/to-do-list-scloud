(()=>{"use strict";function e(e){e.classList.remove("popup_is-opened"),e.removeEventListener("click",t),document.removeEventListener("keydown",n)}function t(t){t.currentTarget===t.target&&e(t.currentTarget)}function n(t){"Escape"===t.key&&e(document.querySelector(".popup_is-opened"))}const o=document.querySelector(".form-add-task"),s=document.querySelector(".todo__add-task-input"),c=document.querySelector(".todo__tasks-list"),d=document.querySelector(".popup"),i=document.querySelectorAll(".popup__close-btn"),u=document.querySelector("#delete-btn");o.addEventListener("submit",(function(e){e.preventDefault();const t=s.value,n={id:Date.now(),text:t,buttonText:"Открыт"};r.push(n),console.log(r);const o=`\n      <li class="todo__tasks-item" id="${n.id}" >\n          <h4 class="todo__tasks-items-title">\n              ${n.text}\n          </h4>\n          <button class="todo__tasks-items-button">${n.buttonText}</button>\n      </li>`;c.insertAdjacentHTML("beforeend",o),s.value="",s.focus()}));let r=[];u.addEventListener("click",(function(){if(d.currentTask){const t=d.currentTask.id,n=r.findIndex((e=>e.id===t));if(-1!==n){r.splice(n,1);const o=document.getElementById(t);o&&o.remove(),e()}}})),c.addEventListener("click",(function(e){if(e.target.closest(".todo__tasks-item")){const s=e.target.closest(".todo__tasks-item").id;o=r.find((e=>e.id===s)),d.currentTask=o,function(e){e.classList.add("popup_is-animated"),setTimeout((()=>{e.classList.add("popup_is-opened")}),1),e.addEventListener("click",t),document.addEventListener("keydown",n)}(d)}var o})),i.forEach((t=>{t.addEventListener("click",(function(){e(t.closest(".popup_is-opened"))}))}))})();