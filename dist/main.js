(()=>{"use strict";function e(e){e.classList.remove("popup_is-opened"),e.removeEventListener("click",t),document.removeEventListener("keydown",n)}function t(t){t.currentTarget===t.target&&e(t.currentTarget)}function n(t){"Escape"===t.key&&e(document.querySelector(".popup_is-opened"))}const o=document.querySelector(".form-add-task"),s=document.querySelector(".todo__add-task-input"),c=document.querySelector(".todo__tasks-list"),u=(document.querySelector(".todo__tasks-items-title"),document.querySelectorAll(".popup__close-btn")),d=document.querySelector(".popup"),i=(document.getElementById("removeBtn"),d.querySelector(".popup__input")),r=d.querySelector(".popup__btn-apply");o.addEventListener("submit",(function(o){o.preventDefault();const u=s.value,p={id:Date.now(),text:u,buttonText:"Открыт"};a.push(p);const m=`\n      <li class="todo__tasks-item" id="${p.id}" >\n          <h4 class="todo__tasks-items-title">\n              ${p.text}\n          </h4>\n          <button class="todo__tasks-items-button">${p.buttonText}</button>\n      </li>`;c.insertAdjacentHTML("beforeend",m),s.value="",s.focus(),c.addEventListener("click",(function(e){"LI"===e.target.tagName&&(l=e.target.id,function(e){e.classList.add("popup_is-animated"),setTimeout((()=>{e.classList.add("popup_is-opened")}),1),e.addEventListener("click",t),document.addEventListener("keydown",n)}(d))})),r.addEventListener("click",(function(){const t=i.value,n=document.getElementById(l);n&&(n.querySelector(".todo__tasks-items-title").textContent=t,e(d))}))}));let a=[],l=null;u.forEach((t=>{t.addEventListener("click",(function(){e(t.closest(".popup_is-opened"))}))}))})();