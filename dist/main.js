(()=>{"use strict";function e(e){e.classList.remove("popup_is-opened"),e.removeEventListener("click",t),document.removeEventListener("keydown",n)}function t(t){t.currentTarget===t.target&&e(t.currentTarget)}function n(t){"Escape"===t.key&&e(document.querySelector(".popup_is-opened"))}const o=document.querySelector(".form-add-task"),s=document.querySelector(".todo__add-task-input"),c=document.querySelector(".todo__tasks-list"),d=document.querySelectorAll(".popup__close-btn"),i=document.querySelector(".popup");o.addEventListener("submit",(function(o){o.preventDefault();const d=s.value,a={id:Date.now(),text:d,buttonText:"Открыт"};u.push(a),console.log(u);const l=`\n      <li class="todo__tasks-item" id="${a.id}" >\n          <h4 class="todo__tasks-items-title">\n              ${a.text}\n          </h4>\n          <button class="todo__tasks-items-button">${a.buttonText}</button>\n      </li>`;c.insertAdjacentHTML("beforeend",l),s.value="",s.focus(),c.addEventListener("click",(function(e){"LI"===e.target.tagName&&(r=e.target.id,function(e){e.classList.add("popup_is-animated"),setTimeout((()=>{e.classList.add("popup_is-opened")}),1),e.addEventListener("click",t),document.addEventListener("keydown",n)}(i))})),document.getElementById("removeBtn").addEventListener("click",(function(){if(r){const t=document.getElementById(r);t&&(t.parentNode.removeChild(t),e(i))}}))}));let u=[],r=null;d.forEach((t=>{t.addEventListener("click",(function(){e(t.closest(".popup_is-opened"))}))}))})();