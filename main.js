(()=>{"use strict";function t(t){t.classList.remove("popup_is-opened"),t.removeEventListener("click",e),document.removeEventListener("keydown",o)}function e(e){e.currentTarget===e.target&&t(e.currentTarget)}function o(e){"Escape"===e.key&&t(document.querySelector(".popup_is-opened"))}const n=document.querySelector(".form-add-task"),s=document.querySelector(".todo__add-task-input"),c=document.querySelector(".todo__tasks-list"),d=document.querySelector(".popup"),i=document.querySelectorAll(".popup__close-btn");n.addEventListener("submit",(function(t){t.preventDefault();const e=s.value,o={id:Date.now(),text:e,buttonText:"Открыт"};u.push(o),console.log(u);const n=`\n      <li class="todo__tasks-item" id="${o.id}" >\n          <h4 class="todo__tasks-items-title">\n              ${o.text}\n          </h4>\n          <button class="todo__tasks-items-button" >${o.buttonText}</button>\n      </li>`;c.insertAdjacentHTML("beforeend",n),s.value="",s.focus()})),c.addEventListener("click",(function(t){if("delete"!==t.target.dataset.action){const e=t.target.closest(".todo__tasks-item");console.log(e.id)}}));let u=[];c.addEventListener("click",(()=>{!function(t){t.classList.add("popup_is-animated"),setTimeout((()=>{t.classList.add("popup_is-opened")}),1),t.addEventListener("click",e),document.addEventListener("keydown",o)}(d)})),i.forEach((e=>{e.addEventListener("click",(function(){t(e.closest(".popup_is-opened"))}))}))})();