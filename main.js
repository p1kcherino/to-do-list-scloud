(()=>{"use strict";function t(t){t.classList.remove("popup_is-opened"),t.removeEventListener("click",e),document.removeEventListener("keydown",o)}function e(e){e.currentTarget===e.target&&t(e.currentTarget)}function o(e){"Escape"===e.key&&t(document.querySelector(".popup_is-opened"))}const n=document.querySelector(".form-add-task"),s=document.querySelector(".todo__add-task-input"),c=document.querySelector(".todo__tasks-list"),u=(document.querySelector(".todo__tasks-items-title"),document.querySelectorAll(".popup__close-btn")),i=document.querySelector(".popup"),d=(document.getElementById("removeBtn"),i.querySelector(".popup__input")),r=i.querySelector(".popup__btn-apply");n.addEventListener("submit",(function(n){n.preventDefault();const u=s.value,p={id:Date.now(),text:u,buttonText:"Открыт"};a.push(p);const m=`\n      <li class="todo__tasks-item" id="${p.id}" >\n          <h4 class="todo__tasks-items-title">\n              ${p.text}\n          </h4>\n          <button class="todo__tasks-items-button">${p.buttonText}</button>\n      </li>`;c.insertAdjacentHTML("beforeend",m),s.value="",s.focus(),c.addEventListener("click",(function(t){if("LI"===t.target.tagName||"BUTTON"===t.target.tagName||"H4"===t.target.tagName){l=t.target.closest("li").id;const n=t.target.closest("li").querySelector(".todo__tasks-items-title").textContent.trim();d.value=n,function(t){t.classList.add("popup_is-animated"),setTimeout((()=>{t.classList.add("popup_is-opened")}),1),t.addEventListener("click",e),document.addEventListener("keydown",o)}(i)}})),r.addEventListener("click",(function(){const e=d.value,o=document.getElementById(l);o&&(o.querySelector(".todo__tasks-items-title").textContent=e,t(i))}))}));let a=[],l=null;u.forEach((e=>{e.addEventListener("click",(function(){t(e.closest(".popup_is-opened"))}))}))})();